import{h as v,j as y,o as c,c as m,a as e,t as l,w as q,b,v as p,k,l as $,F as D,m as S,i as g,n as x}from"./index-7Hrl5RlY.js";import{u as w}from"./requestStore-DA7XpH_l.js";const N={class:"container mx-auto p-6 max-w-md"},R={class:"-backdrop-hue-rotate-60 hover:backdrop-hue-rotate-60 bg-white/30 shadow-2xl rounded-lg"},j={class:"border-b border-white p-4 bg-cyan-500 rounded-t-lg"},z={class:"text-lg text-center font-bold text-zinc-100"},E={class:"p-4"},C={class:"mb-4"},I=e("label",{for:"requestName",class:"block text-zinc-500 text-sm font-semibold mb-1"},"Name",-1),V={class:"mb-4"},B=e("label",{for:"subject",class:"block text-zinc-500 text-sm font-semibold mb-1"},"Subject",-1),F={class:"mb-4"},U=e("label",{for:"description",class:"block text-zinc-500 text-sm font-semibold mb-1"},"Description",-1),T={class:"mb-4"},L=e("label",{for:"date",class:"block text-zinc-500 text-sm font-semibold mb-1"},"Date",-1),M={class:"flex justify-center gap-4"},A={type:"submit",class:"bg-amber-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500"},O={__name:"EditRequestForm",props:{id:[Number,String]},emits:["cancel","saved"],setup(h,{emit:a}){const u=a,o=h,d=w(),s=v({requestName:"",subject:"",description:"",date:""}),_=r=>{const t=new Date(r);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]};y(()=>o.id,async r=>{if(r){const t=d.getRequestById(Number(r));t&&(s.value={...t,date:_(t.date)})}else n()},{immediate:!0});const f=async()=>{try{o.id?await d.updateRequest(Number(o.id),s.value):await d.addRequest(s.value),n(),u("saved")}catch(r){console.error("Error submitting the request:",r)}},n=()=>{s.value={requestName:"",subject:"",description:"",date:""}};return(r,t)=>(c(),m("div",N,[e("div",R,[e("div",j,[e("h5",z,l(o.id?"Edit Request":"Request Form"),1)]),e("div",E,[e("form",{onSubmit:q(f,["prevent"])},[e("div",C,[I,b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>s.value.requestName=i),type:"text",id:"name",placeholder:"Name",class:"form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",required:""},null,512),[[p,s.value.requestName]])]),e("div",V,[B,b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>s.value.subject=i),type:"text",id:"subject",placeholder:"Subject",class:"form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",required:""},null,512),[[p,s.value.subject]])]),e("div",F,[U,b(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=i=>s.value.description=i),id:"description",rows:"3",placeholder:"Description",class:"form-textarea mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",required:""},null,512),[[p,s.value.description]])]),e("div",T,[L,b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>s.value.date=i),id:"date",type:"date",class:"form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",required:""},null,512),[[p,s.value.date]])]),e("div",M,[e("button",A,l(o.id?"Update":"Submit"),1),e("button",{type:"button",onClick:t[4]||(t[4]=i=>r.$emit("cancel")),class:"bg-zinc-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-zinc-700 focus:outline-none focus:ring-2 focus:ring-zinc-500"},"Cancel")])],32)])])]))}},G={class:"container mx-auto p-10"},H={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},J={class:"border-b border-white p-4 bg-cyan-600 rounded-t-lg"},K={class:"text-lg text-center font-bold text-zinc-100"},P={class:"p-6 flex flex-col"},Q={class:"text-sm text-zinc-500 mb-2"},W=e("strong",null,"Subject:",-1),X={class:"text-sm text-zinc-500 mb-2"},Y=e("strong",null,"Description:",-1),Z={class:"text-sm text-zinc-500 mt-auto mb-2"},ee=e("strong",null,"Date:",-1),te=["onClick"],se=["onClick"],oe={__name:"EditRequestList",emits:["edit"],setup(h,{emit:a}){const u=a,o=w(),d=k(()=>o.requests);$(()=>{o.fetchAllRequests()});const s=n=>new Date(n).toLocaleDateString(),_=n=>{console.log("Editing request with ID:",n),u("edit",n)},f=async n=>{try{await o.deleteRequest(n),console.log("Request deleted successfully with ID:",n)}catch(r){console.error("Error deleting the request with ID:",n,r)}};return(n,r)=>(c(),m("div",G,[e("div",H,[(c(!0),m(D,null,S(d.value,t=>(c(),m("div",{key:t.id,class:"-backdrop-hue-rotate-60 hover:backdrop-hue-rotate-60 bg-white/30 shadow-2xl rounded-md"},[e("div",J,[e("h4",K,l(t.requestName),1)]),e("div",P,[e("p",Q,[W,g(" "+l(t.subject),1)]),e("p",X,[Y,g(" "+l(t.description),1)]),e("p",Z,[ee,g(" "+l(s(t.requestDate)),1)]),e("button",{onClick:i=>_(t.id),"data-test":"edit-button",class:"bg-cyan-400 text-white py-2 px-6 rounded-md shadow-sm hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-amber-500 mt-3"},"Edit",8,te),e("button",{onClick:i=>f(t.id),"data-test":"delete-button",class:"bg-amber-600 text-white py-2 px-6 rounded-md shadow-sm hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-red-500 mt-3"},"Delete",8,se)])]))),128))])]))}},ie={__name:"EditRequestView",setup(h){const a=v(null),u=d=>{a.value=d},o=()=>{a.value=null};return(d,s)=>(c(),m("main",null,[e("div",null,[a.value?(c(),x(O,{key:1,id:a.value,onCancel:o,onSaved:o},null,8,["id"])):(c(),x(oe,{key:0,onEdit:u}))])]))}};export{ie as default};
